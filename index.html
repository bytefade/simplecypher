<!doctype html>
<html>
    <body>
        <label>Texto original</label>
        <textarea id="text"></textarea>
        <button onclick="cifrar()">cifrar</button>
        <label>Texto cifrado</label>
        <textarea id="cifrada"></textarea>
    </body>
    <script>
        const ALPHABET_LENGHT = 26;
        const NUMBERS_LENGHT = 10;

        function cifrar() {
            let text = document.getElementById("text").value.toUpperCase();

            let msg = text.split(" ");

            let indexInText = Array.from(text).map((letra, index) => {
                /* Resolve problema da soma do 1º e 2º caracter, então add 1 */
                index += 1;
                return { index, letra };
            });
            console.log("indexInText", indexInText);
            let cifrada = "";
            for (let i = 0; i < indexInText.length; i++) {
                let index = calculaTotalIndice(indexInText.slice(i));
                cifrada += alfabeto(index);
                console.log("CIFRADA", cifrada);
            }
            let textAreaCifrada = document.getElementById("cifrada");
            textAreaCifrada.innerHTML = cifrada;
        }

        //Acha soma dos índices
        function calculaTotalIndice(palavra) {
            const sum = Object.values(palavra).reduce(
                (total, curr) => total + curr.index,
                0,
            );

            if (sum > ALPHABET_LENGHT) {
                return sum - ALPHABET_LENGHT;
            }

            return sum;
        }

        function alfabeto(index) {
            let alfabeto = {
                1: "A",
                2: "B",
                3: "C",
                4: "D",
                5: "E",
                6: "F",
                7: "G",
                8: "H",
                9: "I",
                10: "J",
                11: "K",
                12: "L",
                13: "M",
                14: "N",
                15: "O",
                16: "P",
                17: "Q",
                18: "R",
                19: "S",
                20: "T",
                21: "U",
                22: "V",
                23: "W",
                24: "X",
                25: "Y",
                26: "Z",
            };
            return alfabeto[index];
        }
        // let testletra = alfabeto(2);
        // console.log("letra index", testletra);

        function numeros(numero) {
            let numeros = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            let index = numeros.findIndex((x) => x === numero) + 1;
            return index;
        }
        // let testnumero = numeros(0);
        // console.log("número index", testnumero);
    </script>
</html>
